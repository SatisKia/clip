#!NAMESPACE image
# 色調補正
#\!- <array> <brightness> <contrast>
:include !image:color
:ans FALSE
:param 0 TRUE

# 明るさ補正
$ADD		@1,128 * (1.0 - @2)

$COL		@w,@@0
$ROW		@h,@@0
$SET_Z		@y
$LOOPSTART	# @y
$SET_Z		@x
$LOOPSTART	# @x
$SET		@C,@@0 @y @x

# 積和演算
$MUL_A		@R,@2,get_red @C
$ADD		@R,@1
$MUL_A		@G,@2,get_green @C
$ADD		@G,@1
$MUL_A		@B,@2,get_blue @C
$ADD		@B,@1

$SET		@@0 @y @x,make_color_s @R @G @B # 飽和演算
$LOOPEND_I	@x,@w
$LOOPEND_I	@y,@h
