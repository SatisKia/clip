function _Float(n){this._val=n==undefined?0:n}function newFloatArray(n){for(var i=new Array(n),t=0;t<n;t++)i[t]=new _Float;return i}function _Integer(n){this._val=n==undefined?0:_INT(n)}function newIntegerArray(n){for(var i=new Array(n),t=0;t<n;t++)i[t]=new _Integer;return i}function _String(n){this._str=n==undefined?"":n==null?null:""+n}function newStringArray(n){for(var i=new Array(n),t=0;t<n;t++)i[t]=new _String;return i}function setComplexAngType(n){_complex_ang_type=n;_complex_israd=_complex_ang_type==0;_complex_ang_coef=_complex_ang_type==1?180:200}function complexAngType(){return _complex_ang_type}function setComplexIsReal(n){_complex_isreal=n}function complexIsReal(){return _complex_isreal}function clearComplexError(){_complex_err=!1}function complexError(){return _complex_err}function _Complex(n,t){this._re=n==undefined?0:n;this._im=t==undefined?0:t}function getComplex(n,t,i){t.set(n._re);i.set(n._im)}function setComplex(n,t,i){return n._re=t,n._im=i,n}function dupComplex(n){return new _Complex(n._re,n._im)}function floatToComplex(n){return new _Complex(n,0)}function _radToAng(n){return _complex_israd?n:n*_complex_ang_coef/_PI}function _angToRad(n){return _complex_israd?n:n*_PI/_complex_ang_coef}function fsin(n){return Math.sin(_angToRad(n))}function fcos(n){return Math.cos(_angToRad(n))}function ftan(n){return Math.tan(_angToRad(n))}function fasin(n){return _radToAng(Math.asin(n))}function facos(n){return _radToAng(Math.acos(n))}function fatan(n){return _radToAng(Math.atan(n))}function fatan2(n,t){return _radToAng(Math.atan2(n,t))}function fsinh(n){if(Math.abs(n)>_EPS5){var t=Math.exp(n);return(t-1/t)/2}return n*(1+n*n/6)}function fcosh(n){var t=Math.exp(n);return(t+1/t)/2}function ftanh(n){return n>_EPS5?2/(1+Math.exp(-2*n))-1:n<-_EPS5?1-2/(Math.exp(2*n)+1):n*(1-n*n/3)}function fasinh(n){return n>_EPS5?Math.log(Math.sqrt(n*n+1)+n):n<-_EPS5?-Math.log(Math.sqrt(n*n+1)-n):n*(1-n*n/6)}function facosh(n){return Math.log(n+Math.sqrt(n*n-1))}function fatanh(n){return Math.abs(n)>_EPS5?Math.log((1+n)/(1-n))*.5:n*(1+n*n/3)}function clearFractError(){_fract_err=!1}function fractError(){return _fract_err}function _Fract(n,t,i){this._mi=n==undefined?!1:n;this._nu=t==undefined?0:_INT(t);this._de=i==undefined?1:_INT(i)}function getFract(n,t,i,r){t.set(n._mi);i.set(n._nu);r.set(n._de)}function setFract(n,t,i,r){return n._mi=t,n._nu=i,n._de=r,n}function dupFract(n){return setFract(new _Fract,n._mi,n._nu,n._de)}function floatToFract(n){return(new _Fract).ass(n)}function srand(n){_rand_next=n}function rand(){return _rand_next=_UNSIGNED(_rand_next*1103515245+12345,4294967296),_MOD(_rand_next/((_RAND_MAX+1)*2),_RAND_MAX+1)}function _INT(n){return n<0?Math.ceil(n):Math.floor(n)}function _DIV(n,t){return n<0?Math.ceil(n/t):Math.floor(n/t)}function _MOD(n,t){return n<0?(n=-_INT(n),-(n-Math.floor(n/t)*t)):(n=_INT(n),n-Math.floor(n/t)*t)}function _SHIFTL(n,t){return n*Math.pow(2,t)}function _SHIFTR(n,t){return _DIV(n,Math.pow(2,t))}function _AND(n,t){return(_DIV(n,65536)&_DIV(t,65536))*65536+(n&65535&t&65535)}function _OR(n,t){return(_DIV(n,65536)|_DIV(t,65536))*65536+(n&65535|t&65535)}function _XOR(n,t){return(_DIV(n,65536)^_DIV(t,65536))*65536+(n&65535^t&65535)}function _SIGNED(n,t){var i=t/2-1,r=-t/2;return(n=_MOD(n,t),n>i)?n-t:n<r?n+t:n}function _UNSIGNED(n,t){return(n=_MOD(n,t),n<0)?n+t:n}function _CHAR(n){return n.charCodeAt(0)}function _ISINF(n){return Number.isFinite(n)?!1:!0}function _ISNAN(n){return Number.isNaN(n)}function _ISZERO(n){return _ISNAN(n)||n!=0?!1:!0}function _APPROX(n,t){return t==0?Math.abs(n)<_DBL_EPSILON*4:Math.abs((t-n)/t)<_DBL_EPSILON*4}function _APPROX_M(n,t){var r,i;if(n._row!=t._row||n._col!=t._col)return!1;for(r=n._len,i=0;i<r;i++)if(!_APPROX(n.mat(i).toFloat(),t.mat(i).toFloat())||!_APPROX(n.mat(i).imag(),t.mat(i).imag()))return!1;return!0}function _EPREC(n){var t,i,r,u;if(_ISINF(n)||_ISNAN(n)||_ISZERO(n))return 0;for(i=0,t=0;;t++){if(r=n*Math.pow(10,t),u=_INT(r),r-u==0)break;u==0&&i++}return i==0?t+_INT(Math.log(Math.abs(n))*_NORMALIZE):t-i}function _FPREC(n){var t,i,r;if(_ISINF(n)||_ISNAN(n))return 0;for(t=0;;t++)if(i=n*Math.pow(10,t),r=_INT(i),i-r==0)break;return t}function _GCD(n,t){if(_ISNAN(n))return n;if(_ISNAN(t))return t;n=_INT(n);t=_INT(t);for(var i;t!=0;)i=_MOD(n,t),n=t,t=i;return n}function _LCM(n,t){if(_ISNAN(n))return n;if(_ISNAN(t))return t;n=_INT(n);t=_INT(t);var i=_GCD(n,t);return i==0?0:n*t/i}function stringToFloat(n,t,i){for(var u=0,r=t,f=!1;r<n.length;){switch(u){case 0:(n.charAt(r)=="+"||n.charAt(r)=="-")&&r++;u++;break;case 1:case 3:case 5:n.charCodeAt(r)>=_CHAR_CODE_0&&n.charCodeAt(r)<=_CHAR_CODE_9?r++:u++;break;case 2:n.charAt(r)=="."?(r++,u=3):u=4;break;case 4:if(n.charAt(r)=="e"||n.charAt(r)=="E"){if(n.charCodeAt(r+1)>=_CHAR_CODE_0&&n.charCodeAt(r+1)<=_CHAR_CODE_9){r++;u=5;break}if(n.charAt(r+1)=="+"||n.charAt(r+1)=="-"){r+=2;u=5;break}}case 6:f=!0}if(f)break}return i.set(r),parseFloat(n.substring(t,r))}function stringToInt(n,t,i,r){var e=0,u=t,o=!1,f,s;for(n.charAt(u)=="+"?u++:n.charAt(u)=="-"&&(o=!0,u++),s=r>10?10:r;u<n.length;)if(f=n.charCodeAt(u),e*=r,f>=_CHAR_CODE_0&&f<_CHAR_CODE_0+s)e+=f-_CHAR_CODE_0,u++;else if(f>=_CHAR_CODE_LA&&f<_CHAR_CODE_LA+(r-10))e+=10+(f-_CHAR_CODE_LA),u++;else if(f>=_CHAR_CODE_UA&&f<_CHAR_CODE_UA+(r-10))e+=10+(f-_CHAR_CODE_UA),u++;else break;return i.set(u),o?-e:e}function _floatString(n){var t=n,f="",r=n.indexOf("e"),u,i;if(r<0&&(r=n.indexOf("E")),r>=0&&(t=n.substring(0,r),f=n.slice(r)),u=t.indexOf("."),u>=0){for(i=t.length;i>u;){if(t.charAt(i-1)!="0"&&t.charAt(i-1)!=".")break;i--}t=t.substr(0,i)}return t+f}function floatToExponential(n,t){var i;return t==undefined?i=n.toExponential():(t<0&&(t=0),t>20&&(t=20),i=n.toExponential(t)),_floatString(i)}function floatToFixed(n,t){var i;return t==undefined?(i=n.toFixed(),(i.indexOf("e")>=0||i.indexOf("E")>=0)&&(i=n.toExponential())):(t<0&&(t=0),t>20&&(t=20),i=n.toFixed(t),(i.indexOf("e")>=0||i.indexOf("E")>=0)&&(i=n.toExponential(t))),_floatString(i)}function floatToString(n,t){var i;return t==undefined?i=n.toPrecision():(t<1&&(t=1),t>21&&(t=21),i=n.toPrecision(t)),_floatString(i)}function floatToStringPoint(n,t){var i=floatToString(n,t);return i.indexOf(".")<0&&(i+=".0"),i}function intToString(n,t,i){var o,f,r,e,u;if(_ISNAN(n))return n.toString();for((i==undefined||i<=0)&&(i=1),o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",f=n<0,f&&(n=-n),r="";n!=0;)r+=o.charAt(_MOD(n,t)),n=_DIV(n,t);for(u=r.length;u<i;u++)r+="0";for(f&&(r+="-"),e="",u=r.length-1;u>=0;u--)e+=r.charAt(u);return e}function clearMatrixError(){_matrix_err=!1}function matrixError(){return _matrix_err}function _Matrix(n,t){this._row=n==undefined?1:n;this._col=t==undefined?1:t;this._len=this._row*this._col;this._mat=newValueArray(this._len+1)}function deleteMatrix(n){for(var t=0;t<n._mat.length;t++)n._mat[t]=null;n._mat=null}function dupMatrix(n){for(var i=new _Matrix(n._row,n._col),t=0;t<n._len;t++)i._mat[t].ass(n._mat[t]);return i}function arrayToMatrix(n){for(var i,u=n.length,r=n[0].length,f,t=1;t<u;t++)n[t].length<r&&(r=n[t].length);for(f=new _Matrix(u,r),t=0;t<u;t++)for(i=0;i<r;i++)f._val(t,i).ass(n[t][i]);return f}function valueToMatrix(n){var t=new _Matrix;return t._mat[0].ass(n),t}function floatToMatrix(n){var t=new _Matrix;return t._mat[0].setFloat(n),t}function newMatrixArray(n){for(var i=new Array(n),t=0;t<n;t++)i[t]=new _Matrix;return i}function setTimeFps(n){_time_fps=n}function timeFps(){return _time_fps}function clearTimeError(){_time_err=!1}function timeError(){return _time_err}function _Time(n,t,i,r,u){this._fps=_time_fps;this._minus=n==undefined?!1:n;this._hour=t==undefined?0:t;this._min=i==undefined?0:i;this._sec=r==undefined?0:r;this._frame=u==undefined?0:u}function getTime(n,t,i,r,u,f,e){t.set(n._fps);i.set(n._minus);r.set(n._hour);u.set(n._min);f.set(n._sec);e.set(n._frame)}function setTime(n,t,i,r,u,f,e){return n._fps=t,n._minus=i,n._hour=r,n._min=u,n._sec=f,n._frame=e,n}function dupTime(n){return setTime(new _Time,n._fps,n._minus,n._hour,n._min,n._sec,n._frame)}function floatToTime(n){return(new _Time).ass(n)}function setValueType(n){_value_type=n}function valueType(){return _value_type}function clearValueError(){clearComplexError();clearFractError();clearTimeError()}function valueError(){return complexError()||fractError()||timeError()}function _Value(){this._type=_value_type;this._c=new _Complex;this._f=new _Fract;this._t=new _Time}function deleteValue(n){n._c=null;n._f=null;n._t=null}function getValue(n,t,i,r,u){t.set(n._type);setComplex(i,n._c._re,n._c._im);setFract(r,n._f._mi,n._f._nu,n._f._de);setTime(u,n._t._fps,n._t._minus,n._t._hour,n._t._min,n._t._sec,n._t._frame)}function setValue(n,t,i,r,u){return n._type=t,setComplex(n._c,i._re,i._im),setFract(n._f,r._mi,r._nu,r._de),setTime(n._t,u._fps,u._minus,u._hour,u._min,u._sec,u._frame),n}function dupValue(n){return setValue(new _Value,n._type,n._c,n._f,n._t)}function floatToValue(n){return(new _Value).setFloat(n)}function complexToValue(n){return(new _Value).setComplex(n)}function fractToValue(n){return(new _Value).setFract(n)}function timeToValue(n){return(new _Value).setTime(n)}function newValueArray(n){for(var i=new Array(n),t=0;t<n;t++)i[t]=new _Value;return i}function consoleBreak(){return _console_break}function _Console(n){this._id=n;this._div=document.getElementById(this._id);this._html="";this._blankLine="";this._maxLen=0;this._color="";this._lastColor="";this._bold=!1;this._italic=!1;this._lock=!1;this._needUpdate=!1}function onConsoleUpdate(){}function printBold(n){con.setBold(!0);con.println(n);con.setBold(!1)}function printBlue(n){con.setColor("0000ff");con.println(n);con.setColor()}function _Error(){this._message=new String;this._name=new String;this._description=new String;this._number=new String;this._file=new String;this._line=new String;this._column=new String;this._stack=new String}function catchError(n){var t=new _Error;t._message=n.message;t._name=n.name;n.description&&(t._description=n.description);n.number&&(t._number=""+n.number);n.fileName&&(t._file=n.fileName);n.lineNumber&&(t._line=""+n.lineNumber);n.columnNumber&&(t._column=""+n.columnNumber);n.stack&&(t._stack=n.stack);onError(t)}function clip_onerror(n,t,i){var r=new _Error;return r._message=n,r._file=t,r._line=i,onError(r),!0}function onError(n){con.setColor("ff0000");con.println("<b>message:<\/b> "+n.message());con.println("<b>name:<\/b> "+n.name());con.println("<b>description:<\/b> "+n.description());con.println("<b>number:<\/b> "+n.number());con.println("<b>file:<\/b> "+n.file());con.println("<b>line:<\/b> "+n.line());con.println("<b>column:<\/b> "+n.column());var t=new _String(n.stack());t.escape().replaceNewLine(consoleBreak());con.println("<b>stack:<\/b> "+t.str());con.setColor()}function test(n,t){var i=n;i.length>0&&(i+=" ");i+=t?"OK":"NG";t||con.setColor("ff0000");con.println(i);con.setColor()}function toString(n){var i="",t,r;if(n instanceof Array)for(t=0;t<n.length;t++)t!=0&&(i+=", "),i+=""+n[t];else if(n instanceof _Complex)i+="( "+n.real()+", "+n.imag()+" )";else if(n instanceof _Value)i+=n.imag()==0?""+n.real():"( "+n.real()+", "+n.imag()+" )";else if(n instanceof _Matrix)for(t=0;t<n._row;t++){for(i+=t==0?"[[ ":"[ ",r=0;r<n._col;r++)r!=0&&(i+=", "),i+=toString(n.val(t,r));i+=t==n._row-1?" ]]":" ],"}else i+=""+n;return i}function startTest(n){start=(new Date).getTime();printBold(n)}function endTest(){end=(new Date).getTime();printBold(""+(end-start)/1e3+" sec");con.println()}function main(n){con=new _Console(n);con.lock();try{testMath1();testMath2();testMath3();testComplex();testMatrix()}catch(t){catchError(t)}con.unlock()}function testMath1(){startTest("[testing function, part 1]");var n=new _Integer,t=new _Float;printBold("ceil");test("",floatToValue(-5.1).ceil().equal(-5));test("",floatToValue(-5).ceil().equal(-5));test("",floatToValue(-4.9).ceil().equal(-4));test("",floatToValue(0).ceil().equal(0));test("",floatToValue(4.9).ceil().equal(5));test("",floatToValue(5).ceil().equal(5));test("",floatToValue(5.1).ceil().equal(6));printBold("abs");test("",floatToValue(-5).abs().equal(5));test("",floatToValue(0).abs().equal(0));test("",floatToValue(5).abs().equal(5));printBold("floor");test("",floatToValue(-5.1).floor().equal(-6));test("",floatToValue(-5).floor().equal(-5));test("",floatToValue(-4.9).floor().equal(-5));test("",floatToValue(0).floor().equal(0));test("",floatToValue(4.9).floor().equal(4));test("",floatToValue(5).floor().equal(5));test("",floatToValue(5.1).floor().equal(5));printBold("mod");test("",floatToValue(-7).mod(3).equal(-1));test("",floatToValue(-3).mod(3).equal(0));test("",floatToValue(-2).mod(3).equal(-2));test("",floatToValue(0).mod(3).equal(0));test("",floatToValue(2).mod(3).equal(2));test("",floatToValue(3).mod(3).equal(0));test("",floatToValue(7).mod(3).equal(1));printBold("frexp");test("",_APPROX(floatToValue(-3).frexp(n).toFloat(),-.75)&&n.val()==2);test("",_APPROX(floatToValue(-.5).frexp(n).toFloat(),-.5)&&n.val()==0);test("",floatToValue(0).frexp(n).equal(0)&&n.val()==0);test("",_APPROX(floatToValue(.33).frexp(n).toFloat(),.66)&&n.val()==-1);test("",_APPROX(floatToValue(.66).frexp(n).toFloat(),.66)&&n.val()==0);test("",_APPROX(floatToValue(96).frexp(n).toFloat(),.75)&&n.val()==7);printBold("ldexp");test("",floatToValue(-3).ldexp(4).equal(-48));test("",floatToValue(-.5).ldexp(0).equal(-.5));test("",floatToValue(0).ldexp(36).equal(0));test("",_APPROX(floatToValue(.66).ldexp(-1).toFloat(),.33));test("",floatToValue(96).ldexp(-3).equal(12));printBold("modf");test("",_APPROX(floatToValue(-11.7).modf(t).toFloat(),-11.7+11)&&t.val()==-11);test("",floatToValue(-.5).modf(t).equal(-.5)&&t.val()==0);test("",floatToValue(0).modf(t).equal(0)&&t.val()==0);test("",floatToValue(.6).modf(t).equal(.6)&&t.val()==0);test("",floatToValue(12).modf(t).equal(0)&&t.val()==12);endTest()}function testMath2(){startTest("[testing function, part 2]");var n=.78539816339744828,t=.70710678118654757,i=17976931348623157e292;printBold("facos");test("",_APPROX(facos(-1),4*n));test("",_APPROX(facos(-t),3*n));test("",_APPROX(facos(0),2*n));test("",_APPROX(facos(t),n));test("",_APPROX(facos(1),0));printBold("fasin");test("",_APPROX(fasin(-1),-2*n));test("",_APPROX(fasin(-t),-n));test("",_APPROX(fasin(0),0));test("",_APPROX(fasin(t),n));test("",_APPROX(fasin(1),2*n));printBold("fatan");test("",_APPROX(fatan(-i),-2*n));test("",_APPROX(fatan(-1),-n));test("",_APPROX(fatan(0),0));test("",_APPROX(fatan(1),n));test("",_APPROX(fatan(i),2*n));printBold("fatan2");test("",_APPROX(fatan2(-1,-1),-3*n));test("",_APPROX(fatan2(-1,0),-2*n));test("",_APPROX(fatan2(-1,1),-n));test("",_APPROX(fatan2(0,1),0));test("",_APPROX(fatan2(1,1),n));test("",_APPROX(fatan2(1,0),2*n));test("",_APPROX(fatan2(1,-1),3*n));test("",_APPROX(fatan2(0,-1),4*n)||_APPROX(fatan2(0,-1),-4*n));printBold("fcos");test("",_APPROX(fcos(-3*n),-t));test("",_APPROX(fcos(-2*n),0));test("",_APPROX(fcos(-n),t));test("",_APPROX(fcos(0),1));test("",_APPROX(fcos(n),t));test("",_APPROX(fcos(2*n),0));test("",_APPROX(fcos(3*n),-t));test("",_APPROX(fcos(4*n),-1));printBold("fsin");test("",_APPROX(fsin(-3*n),-t));test("",_APPROX(fsin(-2*n),-1));test("",_APPROX(fsin(-n),-t));test("",_APPROX(fsin(0),0));test("",_APPROX(fsin(n),t));test("",_APPROX(fsin(2*n),1));test("",_APPROX(fsin(3*n),t));test("",_APPROX(fsin(4*n),0));printBold("ftan");test("",_APPROX(ftan(-3*n),1));test("",_APPROX(ftan(-n),-1));test("",_APPROX(ftan(0),0));test("",_APPROX(ftan(n),1));test("",_APPROX(ftan(3*n),-1));endTest()}function testMath3(){startTest("[testing function, part 3]");var n=2.7182818284590451,t=.70710678118654757;printBold("facosh");test("",_APPROX(facosh(1),0));test("",_APPROX(facosh((n+1/n)/2),1));printBold("fasinh");test("",_APPROX(fasinh(-(n-1/n)/2),-1));test("",_APPROX(fasinh(0),0));test("",_APPROX(fasinh((n-1/n)/2),1));printBold("fatanh");test("",_APPROX(fatanh(-(n*n-1)/(n*n+1)),-1));test("",_APPROX(fatanh(0),0));test("",_APPROX(fatanh((n*n-1)/(n*n+1)),1));printBold("fcosh");test("",_APPROX(fcosh(-1),(n+1/n)/2));test("",_APPROX(fcosh(0),1));test("",_APPROX(fcosh(1),(n+1/n)/2));printBold("exp");test("",_APPROX(floatToComplex(-1).exp().toFloat(),1/n));test("",_APPROX(floatToComplex(0).exp().toFloat(),1));test("",_APPROX(floatToComplex(.69314718055994529).exp().toFloat(),2));test("",_APPROX(floatToComplex(1).exp().toFloat(),n));test("",_APPROX(floatToComplex(3).exp().toFloat(),n*n*n));printBold("exp10");test("",_APPROX(floatToComplex(0).exp10().toFloat(),1));test("",_APPROX(floatToComplex(1-floatToComplex(2).log10().toFloat()).exp10().toFloat(),5));test("",_APPROX(floatToComplex(5).exp10().toFloat(),1e5));printBlue(""+floatToComplex(5).exp10().toFloat()+" 100000");printBold("log");test("",floatToComplex(1).log().toFloat()==0);test("",_APPROX(floatToComplex(n).log().toFloat(),1));test("",_APPROX(floatToComplex(n*n*n).log().toFloat(),3));printBold("log10");test("",_APPROX(floatToComplex(1).log10().toFloat(),0));test("",_APPROX(floatToComplex(5).log10().toFloat(),1-floatToComplex(2).log10().toFloat()));test("",_APPROX(floatToComplex(1e5).log10().toFloat(),5));printBold("pow");test("",_APPROX(floatToComplex(-2.5).pow(2).toFloat(),6.25));test("",_APPROX(floatToComplex(-2).pow(-3).toFloat(),-.125));test("",floatToComplex(0).pow(6).toFloat()==0);test("",_APPROX(floatToComplex(2).pow(-.5).toFloat(),t));test("",_APPROX(floatToComplex(3).pow(4).toFloat(),81));printBold("fsinh");test("",_APPROX(fsinh(-1),-(n-1/n)/2));test("",_APPROX(fsinh(0),0));test("",_APPROX(fsinh(1),(n-1/n)/2));printBold("sqr");test("",_APPROX(floatToComplex(0).sqr().toFloat(),0));test("",_APPROX(floatToComplex(t).sqr().toFloat(),.5));test("",_APPROX(floatToComplex(1).sqr().toFloat(),1));test("",_APPROX(floatToComplex(1/t).sqr().toFloat(),2));test("",_APPROX(floatToComplex(12).sqr().toFloat(),144));printBold("sqrt");test("",_APPROX(floatToComplex(0).sqrt().toFloat(),0));test("",_APPROX(floatToComplex(.5).sqrt().toFloat(),t));test("",_APPROX(floatToComplex(1).sqrt().toFloat(),1));test("",_APPROX(floatToComplex(2).sqrt().toFloat(),1/t));test("",_APPROX(floatToComplex(144).sqrt().toFloat(),12));printBold("ftanh");test("",_APPROX(ftanh(-1),-(n*n-1)/(n*n+1)));test("",_APPROX(ftanh(0),0));test("",_APPROX(ftanh(1),(n*n-1)/(n*n+1)));endTest()}function testComplex(){startTest("[testing complex]");var n=new _Complex,i=floatToComplex(1),t=new _Complex(2,2);test("fc0="+toString(n),n.real()==0&&n.imag()==0);test("fc1="+toString(i),i.real()==1&&i.imag()==0);test("fc2="+toString(t),t.real()==2&&t.imag()==2);n.addAndAss(t);test("addAndAss",n.real()==2&&n.imag()==2);n.subAndAss(i);test("subAndAss",n.real()==1&&n.imag()==2);n.mulAndAss(t);test("mulAndAss",n.real()==-2&&n.imag()==6);n.divAndAss(t);test("divAndAss",n.real()==1&&n.imag()==2);n.ass(new _Complex(-4,-5));test("ass",n.real()==-4&&n.imag()==-5);n.ass(floatToComplex(2).add(t).add(3));test("add",n.real()==7&&n.imag()==2);n.ass(floatToComplex(2).sub(t).sub(3));test("sub",n.real()==-3&&n.imag()==-2);n.ass(floatToComplex(2).mul(t).mul(3));test("mul",n.real()==12&&n.imag()==12);n.ass(floatToComplex(8).div(t).div(2));test("div",n.real()==1&&n.imag()==-1);n.ass(i.add(t.minus()));test("minus",n.real()==-1&&n.imag()==-2);test("equal",t.equal(t)&&i.equal(1)&&floatToComplex(1).equal(i));test("notEqual",i.notEqual(t)&&i.notEqual(0)&&floatToComplex(3).notEqual(i));var f=2.7182818284590451,u=.78539816339744828,r=.70710678118654757,e=r*(f+1/f)/2,o=r*(f-1/f)/2;test("fabs",_APPROX(new _Complex(5,-12).fabs(),13));test("farg",i.farg()==0&&_APPROX(t.farg(),u));test("conjg",t.conjg().equal(new _Complex(2,-2)));n.ass(new _Complex(u,-1).cos());test("cos",_APPROX(n.real(),e)&&_APPROX(n.imag(),o));n.ass(new _Complex(-1,u).cosh());test("cosh",_APPROX(n.real(),e)&&_APPROX(n.imag(),-o));n.ass(i.exp());test("exp",_APPROX(n.real(),f)&&n.imag()==0);n.ass(new _Complex(1,-u).exp());test("exp",_APPROX(n.real(),f*r)&&_APPROX(n.imag(),-f*r));n.ass(new _Complex(1,-1).log());test("log",_APPROX(n.real(),.69314718055994529/2)&&_APPROX(n.imag(),-u));test("norm",new _Complex(3,-4).fnorm()==25&&t.fnorm()==8);n.polar(1,-u);test("polar",_APPROX(n.real(),r)&&_APPROX(n.imag(),-r));n.ass(t.pow(t));n.ass(t.pow(5));test("pow",_APPROX(n.real(),-128)&&_APPROX(n.imag(),-128));printBlue(toString(n));n.ass(t.pow(2));test("pow",_APPROX(n.real(),0)&&_APPROX(n.imag(),8));printBlue(toString(n));n.ass(floatToComplex(2).pow(t));n.ass(new _Complex(u,-1).sin());test("sin",_APPROX(n.real(),e)&&_APPROX(n.imag(),-o));n.ass(new _Complex(-1,u).sinh());test("sinh",_APPROX(n.real(),-o)&&_APPROX(n.imag(),e));n.ass(new _Complex(r,-r).sqr());test("sqr",_APPROX(n.real(),0)&&_APPROX(n.imag(),-1));n.ass(new _Complex(0,-1).sqrt());test("sqrt",_APPROX(n.real(),r)&&_APPROX(n.imag(),-r));endTest()}function testMatrix(){var s,n,t,i,h,c,f,e,o,u,r;startTest("[testing matrix]");s=arrayToMatrix([[1,0,0],[0,1,0],[0,0,1]]);printBold("test 1");n=arrayToMatrix([[-4,6,3],[0,1,2]]);t=arrayToMatrix([[5,-1,0],[3,1,0]]);i=arrayToMatrix([[1,5,3],[3,2,2]]);test("",i.equal(n.add(t)));printBold("test 2");n=arrayToMatrix([[2.7,-1.8],[.9,3.6]]);t=arrayToMatrix([[5.4,-3.6],[1.8,7.2]]);i=arrayToMatrix([[3,-2],[1,4]]);test("",n.add(n).equal(floatToMatrix(2).mul(n)));test("",n.add(n).equal(t));test("",floatToMatrix(2).mul(n).equal(t));test("",_APPROX_M(floatToMatrix(10/9).mul(n),i));printBold("test 3");n=arrayToMatrix([[5,-8,1],[4,0,0]]);t=arrayToMatrix([[5,4],[-8,0],[1,0]]);test("",n.trans().equal(t));printBold("test 4");n=arrayToMatrix([[7,5,-2]]);t=arrayToMatrix([[7],[5],[-2]]);test("",n.trans().equal(t));printBold("test 5");n=arrayToMatrix([[2,3],[5,-1]]);h=arrayToMatrix([[2,4],[4,-1]]);c=arrayToMatrix([[0,-1],[1,0]]);test("",n.add(n.trans()).div(2).equal(h));test("",n.sub(n.trans()).div(2).equal(c));printBold("test 6");n=arrayToMatrix([[2,-3],[0,4]]);t=arrayToMatrix([[-5,2],[2,1]]);i=arrayToMatrix([[7,-5],[-2,3]]);test("",n.sub(t).equal(i));i=arrayToMatrix([[-7,5],[2,-3]]);test("",t.sub(n).equal(i));i=arrayToMatrix([[2,0],[-3,4]]);test("",n.trans().equal(i));test("",t.trans().equal(t));test("",t.trans().trans().equal(t));i=arrayToMatrix([[4,-3],[-3,8]]);test("",n.add(n.trans()).equal(i));i=arrayToMatrix([[0,-3],[3,0]]);test("",n.sub(n.trans()).equal(i));i=arrayToMatrix([[-3,2],[-1,5]]);test("",n.add(t).trans().equal(i));test("",n.trans().add(t.trans()).equal(i));printBold("test 7");f=arrayToMatrix([[1,3,5],[0,4,2],[0,0,6]]);e=arrayToMatrix([[2,0,0],[-1,1,0],[4,-3,0]]);o=arrayToMatrix([[6,7],[0,-2],[3,8]]);u=arrayToMatrix([[18,0,9],[21,-6,24]]);test("",floatToMatrix(3).mul(o).trans().equal(u));test("",floatToMatrix(3).mul(o.trans()).equal(u));u=arrayToMatrix([[-1,3,5],[1,3,2],[-4,3,6]]);test("",f.sub(e).equal(u));test("",e.sub(f).equal(u.minus()));u=arrayToMatrix([[3,3,5],[-1,5,2],[4,-3,6]]);test("",f.add(e).equal(u));test("",e.add(f).equal(u));printBold("test 8");n=arrayToMatrix([[2,1],[3,4]]);t=arrayToMatrix([[1,-2],[5,3]]);i=arrayToMatrix([[7,-1],[23,6]]);test("",n.mul(t).equal(i));printBold("test 9");n=arrayToMatrix([[3,2,-1],[0,4,6]]);t=arrayToMatrix([[1,0,2],[5,3,1],[6,4,2]]);i=arrayToMatrix([[7,2,6],[56,36,16]]);test("",n.mul(t).equal(i));printBold("test 10");n=arrayToMatrix([[3,4,2],[6,0,-1],[-5,-2,1]]);t=arrayToMatrix([[1],[3],[2]]);i=arrayToMatrix([[19],[4],[-9]]);test("",n.mul(t).equal(i));printBold("test 11");n=arrayToMatrix([[3,6,1]]);t=arrayToMatrix([[1],[2],[4]]);i=arrayToMatrix([[3,6,1],[6,12,2],[12,24,4]]);test("",floatToMatrix(3).notEqual(n));test("",n.notEqual(3));test("",n.mul(t).equal(19));test("",t.mul(n).equal(i));printBold("test 12");n=arrayToMatrix([[1,0],[0,0]]);t=arrayToMatrix([[0,1],[1,0]]);i=arrayToMatrix([[0,1],[0,0]]);test("",n.mul(t).equal(i));i=arrayToMatrix([[0,0],[1,0]]);test("",t.mul(n).equal(i));printBold("test 13");n=arrayToMatrix([[1,1],[2,2]]);t=arrayToMatrix([[-1,1],[1,-1]]);i=arrayToMatrix([[0,0],[0,0]]);test("",n.mul(t).equal(i));printBold("test 14");n=arrayToMatrix([[4,6,-1],[3,0,2],[1,-2,5]]);t=arrayToMatrix([[2,4],[0,1],[-1,2]]);i=arrayToMatrix([[3],[1],[2]]);r=arrayToMatrix([[33,26,3],[14,14,7],[3,-4,20]]);test("",n.mul(n).equal(r));r=arrayToMatrix([[4],[17]]);test("",t.trans().mul(i).equal(r));r=arrayToMatrix([[4,17]]);test("",i.trans().mul(t).equal(r));r=arrayToMatrix([[20,4,6],[4,1,2],[6,2,5]]);test("",t.mul(t.trans()).equal(r));r=arrayToMatrix([[5,6],[6,21]]);test("",t.trans().mul(t).equal(r));r=arrayToMatrix([[43,44,0],[23,12,13],[6,-10,33]]);test("",n.mul(n).add(floatToMatrix(3).mul(n)).sub(floatToMatrix(2).mul(s)).equal(r));r=arrayToMatrix([[25,100]]);test("",i.trans().mul(n).mul(t).equal(r));r=arrayToMatrix([[25],[100]]);test("",n.mul(t).trans().mul(i).equal(r));printBold("test 15");n=arrayToMatrix([[2,-1,0],[0,-2,1],[1,0,1]]);t=arrayToMatrix([[-2,1,-1],[1,2,-2],[2,-1,-4]]);i=arrayToMatrix([[-5,0,0],[0,-5,0],[0,0,-5]]);test("",n.mul(t).equal(t.mul(n)));test("",n.mul(t).equal(i));test("",t.mul(n).equal(i));endTest()}var _FRACT_MAX,_fract_err,_matrix_err,_time_fps,_time_err,_value_type,_console_break,con,start,end;_Float.prototype={set:function(n){return this._val=n,this},add:function(n){return this._val+=n,this},val:function(){return this._val}};_Integer.prototype={set:function(n){return this._val=_INT(n),this},add:function(n){return this._val+=_INT(n),this},val:function(){return this._val}};_String.prototype={set:function(n){return this._str=n==null?null:""+n,this},add:function(n){return n!=null&&(this._str==null?this.set(n):this._str+=""+n),this},str:function(){return this._str==null?"":this._str},isNull:function(){return this._str==null},replace:function(n,t){var r=n.length,i,u,f;if(r>0)for(i=0;i<this.str().length;)this.str().substring(i,r)==n?(u=i>0?this.str().substring(0,i):"",f=r<this.str().length?this.str().slice(r):"",this.set(u+t+f),i+=t.length,r+=t.length):(i++,r++);return this},replaceNewLine:function(n){return this.replace("\r\n","\n"),this.replace("\r","\n"),n!=undefined&&this.replace("\n",n),this},escape:function(){return this.replace("&","&amp;"),this.replace("<","&lt;"),this.replace(">","&gt;"),this.replace('"',"&quot;"),this.replace(" ","&nbsp;"),this},unescape:function(){return this.replace("&lt;","<"),this.replace("&gt;",">"),this.replace("&quot;",'"'),this.replace("&nbsp;"," "),this.replace("&amp;","&"),this}};var _EPS5=.001,_PI=3.1415926535897931,_SQRT05=.70710678118654757,_complex_ang_type=0,_complex_israd=!0,_complex_ang_coef=_PI,_complex_isreal=!1,_complex_err=!1;_Complex.prototype={angToAng:function(n,t){if(n!=t)switch(n){case 0:this.mulAndAss(t==1?180:200);this.divAndAss(_PI);break;case 1:this.mulAndAss(t==0?_PI:200);this.divAndAss(180);break;case 2:this.mulAndAss(t==0?_PI:180);this.divAndAss(200)}},setReal:function(n){this._re=n},setImag:function(n){this._im=n},polar:function(n,t){t=_angToRad(t);this._re=n*Math.cos(t);this._im=n*Math.sin(t)},real:function(){return this._re},imag:function(){return this._im},toFloat:function(){return this._re},ass:function(n){return n instanceof _Complex?(this._re=n._re,this._im=n._im):(this._re=n,this._im=0),this},minus:function(){return new _Complex(-this._re,-this._im)},add:function(n){return n instanceof _Complex?new _Complex(this._re+n._re,this._im+n._im):new _Complex(this._re+n,this._im)},addAndAss:function(n){return n instanceof _Complex?(this._re+=n._re,this._im+=n._im):this._re+=n,this},sub:function(n){return n instanceof _Complex?new _Complex(this._re-n._re,this._im-n._im):new _Complex(this._re-n,this._im)},subAndAss:function(n){return n instanceof _Complex?(this._re-=n._re,this._im-=n._im):this._re-=n,this},mul:function(n){return n instanceof _Complex?n._im==0?new _Complex(this._re*n._re,this._im*n._re):new _Complex(this._re*n._re-this._im*n._im,this._re*n._im+this._im*n._re):new _Complex(this._re*n,this._im*n)},mulAndAss:function(n){if(n instanceof _Complex)if(n._im==0)this._re*=n._re,this._im*=n._re;else{var t=this._re*n._re-this._im*n._im;this._im=this._re*n._im+this._im*n._re;this._re=t}else this._re*=n,this._im*=n;return this},div:function(n){var t,i;return n instanceof _Complex?n._im==0?new _Complex(this._re/n._re,this._im/n._re):Math.abs(n._re)<Math.abs(n._im)?(t=n._re/n._im,i=n._re*t+n._im,new _Complex((this._re*t+this._im)/i,(this._im*t-this._re)/i)):(t=n._im/n._re,i=n._re+n._im*t,new _Complex((this._re+this._im*t)/i,(this._im-this._re*t)/i)):new _Complex(this._re/n,this._im/n)},divAndAss:function(n){if(n instanceof _Complex)if(n._im==0)this._re/=n._re,this._im/=n._re;else if(Math.abs(n._re)<Math.abs(n._im)){var t=n._re/n._im,i=n._re*t+n._im,r=(this._re*t+this._im)/i;this._im=(this._im*t-this._re)/i;this._re=r}else{var t=n._im/n._re,i=n._re+n._im*t,r=(this._re+this._im*t)/i;this._im=(this._im-this._re*t)/i;this._re=r}else this._re/=n,this._im/=n;return this},mod:function(n){if(n instanceof _Complex){if(n._im==0)return new _Complex(this._re%n._re,this._im%n._re);var t=dupComplex(this);return t.divAndAss(n),t._re=_INT(t._re),t._im=_INT(t._im),t.mulAndAss(n),this.sub(t)}return new _Complex(this._re%n,this._im%n)},modAndAss:function(n){if(n instanceof _Complex)if(n._im==0)this._re=this._re%n._re,this._im=this._im%n._re;else{var t=dupComplex(this);t.divAndAss(n);t._re=_INT(t._re);t._im=_INT(t._im);t.mulAndAss(n);this.subAndAss(t)}else this._re=this._re%n,this._im=this._im%n;return this},equal:function(n){return n instanceof _Complex?this._re==n._re&&this._im==n._im:this._re==n&&this._im==0},notEqual:function(n){return n instanceof _Complex?this._re!=n._re||this._im!=n._im:this._re!=n||this._im!=0},fabs:function(){var n;return this._re==0?Math.abs(this._im):this._im==0?Math.abs(this._re):Math.abs(this._re)<Math.abs(this._im)?(n=this._re/this._im,Math.abs(this._im)*Math.sqrt(1+n*n)):(n=this._im/this._re,Math.abs(this._re)*Math.sqrt(1+n*n))},farg:function(){return fatan2(this._im,this._re)},fnorm:function(){return this._re*this._re+this._im*this._im},conjg:function(){return new _Complex(this._re,-this._im)},sin:function(){if(this._im==0)return floatToComplex(fsin(this._re));var n=_angToRad(this._re),t=_angToRad(this._im);return new _Complex(Math.sin(n)*fcosh(t),Math.cos(n)*fsinh(t))},cos:function(){if(this._im==0)return floatToComplex(fcos(this._re));var n=_angToRad(this._re),t=_angToRad(this._im);return new _Complex(Math.cos(n)*fcosh(t),-Math.sin(n)*fsinh(t))},tan:function(){if(this._im==0)return floatToComplex(ftan(this._re));var t=_angToRad(this._re)*2,i=_angToRad(this._im)*2,n=Math.cos(t)+fcosh(i);return n==0&&(_complex_err=!0),new _Complex(Math.sin(t)/n,fsinh(i)/n)},asin:function(){if(this._im==0)if(this._re<-1||this._re>1){if(_complex_isreal)return _complex_err=!0,floatToComplex(fasin(this._re))}else return floatToComplex(fasin(this._re));var t=new _Complex(0,1),n=t.minus().mul(t.mul(this).add(this.sqr().minus().add(1).sqrt()).log());return n._re=_radToAng(n._re),n._im=_radToAng(n._im),n},acos:function(){if(this._im==0)if(this._re<-1||this._re>1){if(_complex_isreal)return _complex_err=!0,floatToComplex(facos(this._re))}else return floatToComplex(facos(this._re));var t=new _Complex(0,1),n=t.mul(this.sub(t.mul(this.sqr().minus().add(1).sqrt())).log());return n._re=_radToAng(n._re),n._im=_radToAng(n._im),n},atan:function(){var t,i,n;return this._im==0?floatToComplex(fatan(this._re)):(t=new _Complex(-this._re,1-this._im),t.equal(0)&&(_complex_err=!0),i=new _Complex(0,1),n=i.mul(i.add(this).div(t).log()).mul(.5),n._re=_radToAng(n._re),n._im=_radToAng(n._im),n)},sinh:function(){return this._im==0?floatToComplex(fsinh(this._re)):new _Complex(fsinh(this._re)*Math.cos(this._im),fcosh(this._re)*Math.sin(this._im))},cosh:function(){return this._im==0?floatToComplex(fcosh(this._re)):new _Complex(fcosh(this._re)*Math.cos(this._im),fsinh(this._re)*Math.sin(this._im))},tanh:function(){if(this._im==0)return floatToComplex(ftanh(this._re));var t=this._re*2,i=this._im*2,n=fcosh(t)+Math.cos(i);return n==0&&(_complex_err=!0),new _Complex(fsinh(t)/n,Math.sin(i)/n)},asinh:function(){return this._im==0?floatToComplex(fasinh(this._re)):this.add(this.sqr().add(1).sqrt()).log()},acosh:function(){if(this._im==0)if(this._re<1){if(_complex_isreal)return _complex_err=!0,floatToComplex(facosh(this._re))}else return floatToComplex(facosh(this._re));return this.add(this.sqr().sub(1).sqrt()).log()},atanh:function(){if(this._im==0)if(this._re<=-1||this._re>=1){if(_complex_isreal)return _complex_err=!0,floatToComplex(fatanh(this._re))}else return floatToComplex(fatanh(this._re));var n=new _Complex(1-this._re,-this._im);return n.equal(0)&&(_complex_err=!0),this.add(1).div(n).log().mul(.5)},ceil:function(){return new _Complex(Math.ceil(this._re),Math.ceil(this._im))},floor:function(){return new _Complex(Math.floor(this._re),Math.floor(this._im))},exp:function(){if(this._im==0)return floatToComplex(Math.exp(this._re));var n=Math.exp(this._re);return new _Complex(n*Math.cos(this._im),n*Math.sin(this._im))},exp10:function(){if(this._im==0)return floatToComplex(Math.exp(this._re/_NORMALIZE));var n=this._im/_NORMALIZE,t=Math.exp(this._re/_NORMALIZE);return new _Complex(t*Math.cos(n),t*Math.sin(n))},log:function(){if(this._im==0)if(this._re<=0){if(_complex_isreal)return _complex_err=!0,floatToComplex(Math.log(this._re))}else return floatToComplex(Math.log(this._re));return new _Complex(Math.log(this.fabs()),Math.atan2(this._im,this._re))},log10:function(){if(this._im==0)if(this._re<=0){if(_complex_isreal)return _complex_err=!0,floatToComplex(Math.log(this._re)*_NORMALIZE)}else return floatToComplex(Math.log(this._re)*_NORMALIZE);return new _Complex(Math.log(this.fabs())*_NORMALIZE,Math.atan2(this._im,this._re)*_NORMALIZE)},pow:function(n){return n instanceof _Complex?n._im==0?this._im==0?floatToComplex(Math.pow(this._re,n._re)):this.log().mul(n._re).exp():this._im==0?n.mul(Math.log(this._re)).exp():this.log().mul(n).exp():this._im==0?floatToComplex(Math.pow(this._re,n)):this.log().mul(n).exp()},sqr:function(){return this._im==0?floatToComplex(this._re*this._re):new _Complex(this._re*this._re-this._im*this._im,this._re*this._im+this._im*this._re)},sqrt:function(){var n;if(this._im==0)if(this._re<0){if(_complex_isreal)return _complex_err=!0,floatToComplex(Math.sqrt(this._re))}else return floatToComplex(Math.sqrt(this._re));return this._re>=0?(n=Math.sqrt(this.fabs()+this._re),new _Complex(_SQRT05*n,_SQRT05*this._im/n)):this._im>=0?(n=Math.sqrt(this.fabs()-this._re),new _Complex(_SQRT05*this._im/n,_SQRT05*n)):(n=Math.sqrt(this.fabs()-this._re),new _Complex(-_SQRT05*this._im/n,-_SQRT05*n))}};_FRACT_MAX=Number.MAX_SAFE_INTEGER;_fract_err=!1;_Fract.prototype={reduce:function(){var n=_GCD(this._nu,this._de);n!=0&&(this._nu=_DIV(this._nu,n),this._de=_DIV(this._de,n))},_pure:function(n,t){var o,e,f,i,u,r,s;if(n==0)return-1;o=-1;do o++,n*=10;while(n<1);for(e=floatToFixed(n,20),f=new Array(t),i=0,u=0;i<=t;i++)if(i>=e.length)break;else e.charAt(i)!="."&&(f[u++]=e.charCodeAt(i)-_CHAR_CODE_0);if(u<t)return-1;for(r=_DIV(t,2);r>0;r--){for(i=0;i<r;i++){for(s=!1,u=1;;u++)if(i+r*u>=t)break;else if(f[i]!=f[i+r*u]){s=!0;break}if(s)break}if(i>=r)break}if(r>0){for(this._nu=0,i=0;i<r;i++)this._nu=this._nu*10+f[i];return this._de=(Math.pow(10,r)-1)*Math.pow(10,o),1}return 0},_recurring:function(n){for(var i=n,r=1,u,f,t=0;;t++)if(i/Math.pow(10,t)<10){r=Math.pow(10,t);i/=r;break}for(t=0;;t++){if(u=_INT(i),(f=this._pure(i-u,14))<0)break;if(f>0)return(this._nu=(u*this._de+this._nu)*r,this._de*=Math.pow(10,t),!_APPROX(n,this._nu/this._de))?!1:(this.reduce(),!0);i*=10}return!1},_set:function(n,t){n>t?n>_FRACT_MAX?(this._nu=_FRACT_MAX,this._de=_INT(_FRACT_MAX*t/n)):(this._nu=_INT(n),this._de=_INT(t)):t>_FRACT_MAX?(this._nu=_INT(_FRACT_MAX*n/t),this._de=_FRACT_MAX):(this._nu=_INT(n),this._de=_INT(t));this.reduce()},_setFloat:function(n){if(!this._recurring(n)){var t=Math.pow(10,_FPREC(n));this._set(n*t,t)}},setMinus:function(n){this._mi=n},setNum:function(n){this._nu=_INT(n)},setDenom:function(n){this._de=_INT(n)},getMinus:function(){return this._mi&&this._nu!=0},num:function(){return this._nu},denom:function(){return this._de},toFloat:function(){return this._de==0?Number.POSITIVE_INFINITY:(this._mi?-this._nu:this._nu)/this._de},ass:function(n){return n instanceof _Fract?(this._mi=n._mi,this._nu=n._nu,this._de=n._de):(n<0?(this._mi=!0,n=-n):this._mi=!1,n==_INT(n)?(this._nu=n,this._de=1):this._setFloat(n)),this},minus:function(){return new _Fract(this._mi?!1:!0,this._nu,this._de)},add:function(n){var t,i;return n instanceof _Fract?this._mi!=n._mi?this.sub(n.minus()):this._de==0?this:n._de==0?n:(t=_LCM(this._de,n._de),new _Fract(this._mi,this._nu*t/this._de+n._nu*t/n._de,t)):this._mi!=n<0?this.sub(-n):(i=n<0?-n:n,i==_INT(i))?new _Fract(this._mi,this._nu+i*this._de,this._de):this.add(floatToFract(n))},addAndAss:function(n){var t,i;return n instanceof _Fract?this._mi!=n._mi?this.subAndAss(n.minus()):this._de==0||(n._de==0?this.ass(n):(t=_LCM(this._de,n._de),this._set(this._nu*t/this._de+n._nu*t/n._de,t))):this._mi!=n<0?this.subAndAss(-n):(i=n<0?-n:n,i==_INT(i)?this._set(this._nu+i*this._de,this._de):this.addAndAss(floatToFract(n))),this},sub:function(n){var i,r,t;return n instanceof _Fract?this._mi!=n._mi?this.add(n.minus()):this._de==0?this:n._de==0?n:(i=_LCM(this._de,n._de),t=this._nu*i/this._de-n._nu*i/n._de,t<0)?new _Fract(this._mi?!1:!0,-t,i):new _Fract(this._mi,t,i):this._mi!=n<0?this.add(-n):(r=n<0?-n:n,r==_INT(r))?(t=this._nu-r*this._de,t<0)?new _Fract(this._mi?!1:!0,-t,this._de):new _Fract(this._mi,t,this._de):this.sub(floatToFract(n))},subAndAss:function(n){var i,r,t;return n instanceof _Fract?this._mi!=n._mi?this.addAndAss(n.minus()):this._de==0||(n._de==0?this.ass(n):(i=_LCM(this._de,n._de),t=this._nu*i/this._de-n._nu*i/n._de,t<0?(this._mi=this._mi?!1:!0,this._set(-t,i)):this._set(t,i))):this._mi!=n<0?this.addAndAss(-n):(r=n<0?-n:n,r==_INT(r)?(t=this._nu-r*this._de,t<0?(this._mi=this._mi?!1:!0,this._set(-t,this._de)):this._set(t,this._de)):this.subAndAss(floatToFract(n))),this},mul:function(n){if(n instanceof _Fract)return new _Fract(this._mi!=n._mi,this._nu*n._nu,this._de*n._de);var t=n<0?-n:n;return t==_INT(t)?new _Fract(this._mi!=n<0,this._nu*t,this._de):this.mul(floatToFract(n))},mulAndAss:function(n){if(n instanceof _Fract)this._mi=this._mi!=n._mi,this._set(this._nu*n._nu,this._de*n._de);else{var t=n<0?-n:n;t==_INT(t)?(this._mi=this._mi!=n<0,this._set(this._nu*t,this._de)):this.mulAndAss(floatToFract(n))}return this},div:function(n){if(n instanceof _Fract)return new _Fract(this._mi!=n._mi,this._nu*n._de,this._de*n._nu);var t=n<0?-n:n;return t==_INT(t)?new _Fract(this._mi!=n<0,this._nu,this._de*t):this.div(floatToFract(n))},divAndAss:function(n){if(n instanceof _Fract)this._mi=this._mi!=n._mi,this._set(this._nu*n._de,this._de*n._nu);else{var t=n<0?-n:n;t==_INT(t)?(this._mi=this._mi!=n<0,this._set(this._nu,this._de*t)):this.divAndAss(floatToFract(n))}return this},mod:function(n){var i,r,t;return n instanceof _Fract?this._de==0?this:n._de==0?new _Fract(this._mi,n._nu,n._de):(i=_LCM(this._de,n._de),r=n._nu*i/n._de,r==0)?new _Fract(this._mi,this._nu,0):new _Fract(this._mi,this._nu*i/this._de%r,i):(t=n<0?-n:n,t==_INT(t))?this._de==0?this:t==0?new _Fract(this._mi,0,0):new _Fract(this._mi,this._nu%(t*this._de),this._de):this.mod(floatToFract(n))},modAndAss:function(n){var i,r,t;return n instanceof _Fract?this._de==0||(n._de==0?(this._nu=n._nu,this._de=n._de):(i=_LCM(this._de,n._de),r=n._nu*i/n._de,r==0?this._de=0:this._set(this._nu*i/this._de%r,i))):(t=n<0?-n:n,t==_INT(t)?this._de==0||(t==0?(this._nu=0,this._de=0):this._set(this._nu%(t*this._de),this._de)):this.modAndAss(floatToFract(n))),this},equal:function(n){return n instanceof _Fract?this.getMinus()==n.getMinus()&&this._nu*n._de==this._de*n._nu:this.toFloat()==n},notEqual:function(n){return n instanceof _Fract?this.getMinus()!=n.getMinus()||this._nu*n._de!=this._de*n._nu:this.toFloat()!=n},abs:function(){return new _Fract(!1,this._nu,this._de)},_powInt:function(n){var t=Math.pow(this._nu,n),i=Math.pow(this._de,n);return new _Fract(t<0!=i<0,t<0?-t:t,i<0?-i:i)},pow:function(n){return n instanceof _Fract?n.toFloat()==_INT(n.toFloat())?this._powInt(n.toFloat()):floatToFract(Math.pow(this.toFloat(),n.toFloat())):n==_INT(n)?this._powInt(n):floatToFract(Math.pow(this.toFloat(),n))},sqr:function(){return new _Fract(!1,this._nu*this._nu,this._de*this._de)}};var _DBL_EPSILON=22204460492503131e-32,_NORMALIZE=.43429448190325182,_RAND_MAX=32767,_rand_next=1;var _CHAR_CODE_0=_CHAR("0"),_CHAR_CODE_1=_CHAR("1"),_CHAR_CODE_2=_CHAR("2"),_CHAR_CODE_3=_CHAR("3"),_CHAR_CODE_4=_CHAR("4"),_CHAR_CODE_5=_CHAR("5"),_CHAR_CODE_6=_CHAR("6"),_CHAR_CODE_7=_CHAR("7"),_CHAR_CODE_8=_CHAR("8"),_CHAR_CODE_9=_CHAR("9"),_CHAR_CODE_LA=_CHAR("a"),_CHAR_CODE_UA=_CHAR("A"),_CHAR_CODE_EX=_CHAR("!"),_CHAR_CODE_COLON=_CHAR(":");Number.isFinite=Number.isFinite||function(n){return typeof n=="number"&&isFinite(n)};Number.isNaN=Number.isNaN||function(n){return typeof n=="number"&&isNaN(n)};_matrix_err=!1;_Matrix.prototype={resize:function(n,t){if(n!=this._row||t!=this._col)if((this._len=n*t)>0){for(var r,u=newValueArray(this._len+1),f=n<this._row?n:this._row,e=t<this._col?t:this._col,i=0;i<f;i++)for(r=0;r<e;r++)u[i*t+r].ass(this._val(i,r));this._mat=u;this._row=n;this._col=t}else this._len=this._row*this._col},_resize:function(n){n._len>this._len?this._mat=newValueArray(n._len+1):this._mat[n._len].ass(this._mat[this._len]);this._row=n._row;this._col=n._col;this._len=n._len},_resize1:function(){this._len>1&&(this._mat[1].ass(this._mat[this._len]),this._row=1,this._col=1,this._len=1)},expand:function(n,t){return(n>=this._row||t>=this._col)&&this.resize(n>=this._row?n+1:this._row,t>=this._col?t+1:this._col),this._val(n,t)},set:function(n,t,i){this.expand(n,t).ass(i)},setReal:function(n,t,i){this.expand(n,t).setReal(i)},setImag:function(n,t,i){this.expand(n,t).setImag(i)},setNum:function(n,t,i){this.expand(n,t).setNum(i)},setDenom:function(n,t,i){this.expand(n,t).setDenom(i)},mat:function(n){return this._mat[n>=this._len?this._len:n]},val:function(n,t){return this._mat[n>=this._row||t>=this._col?this._len:n*this._col+t]},_val:function(n,t){return this._mat[n*this._col+t]},toFloat:function(n,t){return this.val(n,t).toFloat()},ass:function(n){if(n instanceof _Matrix)if(n._len==1)this._resize1(),this._mat[0].ass(n._mat[0]);else{this._resize(n);for(var t=0;t<this._len;t++)this._mat[t].ass(n._mat[t])}else this._resize1(),this._mat[0].ass(n);return this},minus:function(){for(var t=new _Matrix(this._row,this._col),n=0;n<this._len;n++)t._mat[n].ass(this._mat[n].minus());return t},add:function(n){if(n instanceof _Matrix){if(n._len==1)return valueToMatrix(this._mat[0].add(n._mat[0]));for(var i,r=new _Matrix(this._row>n._row?this._row:n._row,this._col>n._col?this._col:n._col),t=0;t<r._row;t++)for(i=0;i<r._col;i++)r._val(t,i).ass(this.val(t,i).add(n.val(t,i)));return r}return valueToMatrix(this._mat[0].add(n))},addAndAss:function(n){if(n instanceof _Matrix)if(n._len==1)this._resize1(),this._mat[0].addAndAss(n._mat[0]);else{var t,i;for(this.resize(this._row>n._row?this._row:n._row,this._col>n._col?this._col:n._col),t=0;t<this._row;t++)for(i=0;i<this._col;i++)this._val(t,i).addAndAss(n.val(t,i))}else this._resize1(),this._mat[0].addAndAss(n);return this},sub:function(n){if(n instanceof _Matrix){if(n._len==1)return valueToMatrix(this._mat[0].sub(n._mat[0]));for(var i,r=new _Matrix(this._row>n._row?this._row:n._row,this._col>n._col?this._col:n._col),t=0;t<r._row;t++)for(i=0;i<r._col;i++)r._val(t,i).ass(this.val(t,i).sub(n.val(t,i)));return r}return valueToMatrix(this._mat[0].sub(n))},subAndAss:function(n){if(n instanceof _Matrix)if(n._len==1)this._resize1(),this._mat[0].subAndAss(n._mat[0]);else{var t,i;for(this.resize(this._row>n._row?this._row:n._row,this._col>n._col?this._col:n._col),t=0;t<this._row;t++)for(i=0;i<this._col;i++)this._val(t,i).subAndAss(n.val(t,i))}else this._resize1(),this._mat[0].subAndAss(n);return this},mul:function(n){var i,t;if(this._len==1)return dupMatrix(this).mulAndAss(n);if(n instanceof _Matrix){if(n._len==1){for(i=new _Matrix(this._row,this._col),t=0;t<this._len;t++)i._mat[t].ass(this._mat[t].mul(n._mat[0]));return i}for(var r,u,e=this._row,o=this._col>n._row?this._col:n._row,s=n._col,f=new _Value,i=new _Matrix(e,s),t=0;t<i._row;t++)for(r=0;r<i._col;r++){for(f.ass(0),u=0;u<o;u++)f.addAndAss(this.val(t,u).mul(n.val(u,r)));i._val(t,r).ass(f)}return i}for(i=new _Matrix(this._row,this._col),t=0;t<this._len;t++)i._mat[t].ass(this._mat[t].mul(n));return i},mulAndAss:function(n){if(n instanceof _Matrix)this._len==1?n._len==1?this._mat[0].mulAndAss(n._mat[0]):this.ass(n.mul(this._mat[0])):this.ass(this.mul(n));else if(this._len==1)this._mat[0].mulAndAss(n);else for(var t=0;t<this._len;t++)this._mat[t].mulAndAss(n);return this},div:function(n){var i=new _Matrix(this._row,this._col),t;if(n instanceof _Matrix)for(t=0;t<this._len;t++)i._mat[t].ass(this._mat[t].div(n._mat[0]));else for(t=0;t<this._len;t++)i._mat[t].ass(this._mat[t].div(n));return i},divAndAss:function(n){var t;if(n instanceof _Matrix)if(this._len==1)this._mat[0].divAndAss(n._mat[0]);else for(t=0;t<this._len;t++)this._mat[t].divAndAss(n._mat[0]);else if(this._len==1)this._mat[0].divAndAss(n);else for(t=0;t<this._len;t++)this._mat[t].divAndAss(n);return this},mod:function(n){return n instanceof _Matrix?valueToMatrix(this._mat[0].mod(n._mat[0])):valueToMatrix(this._mat[0],mod(n))},modAndAss:function(n){return this._resize1(),n instanceof _Matrix?this._mat[0].modAndAss(n._mat[0]):this._mat[0].modAndAss(n),this},equal:function(n){if(n instanceof _Matrix){if(this._row!=n._row||this._col!=n._col)return!1;for(var t=0;t<this._len;t++)if(this._mat[t].notEqual(n._mat[t]))return!1;return!0}return this._len!=1?!1:this._mat[0].equal(n)},notEqual:function(n){if(n instanceof _Matrix){if(this._row!=n._row||this._col!=n._col)return!0;for(var t=0;t<this._len;t++)if(this._mat[t].notEqual(n._mat[t]))return!0;return!1}return this._len!=1?!0:this._mat[0].notEqual(n)},trans:function(){for(var t,i=new _Matrix(this._col,this._row),n=0;n<i._row;n++)for(t=0;t<i._col;t++)i._val(n,t).ass(this._val(t,n));return i}};_time_fps=30;_time_err=!1;_Time.prototype={_update:function(){_time_fps!=this._fps&&(this._frame=this._frame*_time_fps/this._fps,this._fps=_time_fps,this.reduce())},_reduce1:function(){var n,t,i;n=this._hour-_INT(this._hour);this._hour=_INT(this._hour);this._min+=n*60;t=this._min-_INT(this._min);this._min=_INT(this._min);this._sec+=t*60;i=this._sec-_INT(this._sec);this._sec=_INT(this._sec);this._frame+=i*this._fps},_reduce2:function(){var n,t,i;n=_INT(this._frame/this._fps);this._frame<0&&this._frame-n*this._fps!=0&&(n-=1);this._sec+=n;this._frame-=n*this._fps;t=_INT(this._sec/60);this._sec<0&&this._sec%60!=0&&(t-=1);this._min+=t;this._sec-=t*60;i=_INT(this._min/60);this._min<0&&this._min%60!=0&&(i-=1);this._hour+=i;this._min-=i*60;this._hour<0&&(this._minus=this._minus?!1:!0,this._hour=-this._hour,this._min=-this._min,this._sec=-this._sec,this._frame=-this._frame,this._reduce2())},reduce:function(){this._reduce1();this._reduce2()},_set:function(n){this._fps=_time_fps;n<0?(this._minus=!0,n=-n):this._minus=!1;this._hour=_DIV(n,3600);n-=_INT(this._hour)*3600;this._min=_DIV(n,60);n-=_INT(this._min)*60;this._sec=_INT(n);this._frame=(n-this._sec)*this._fps},setMinus:function(n){this._minus=n},setHour:function(n){this._hour=n},setMin:function(n){this._min=n},setSec:function(n){this._sec=n},setFrame:function(n){this._frame=n},getMinus:function(){return this._minus},hour:function(){return this._hour+this._min/60+(this._sec+this._frame/this._fps)/3600},min:function(){return this._min+(this._sec+this._frame/this._fps)/60},sec:function(){return this._sec+this._frame/this._fps},frame:function(){return this._frame},toFloat:function(){return this._minus?-(this._hour*3600+this._min*60+this._sec+this._frame/this._fps):this._hour*3600+this._min*60+this._sec+this._frame/this._fps},ass:function(n){return n instanceof _Time?(this._fps=n._fps,this._minus=n._minus,this._hour=n._hour,this._min=n._min,this._sec=n._sec,this._frame=n._frame,this._update()):this._set(n),this},minus:function(){return new _Time(this._minus?!1:!0,this._hour,this._min,this._sec,this._frame)},add:function(n){var t,i,r;return n instanceof _Time?this._minus!=n._minus?this.sub(n.minus()):(t=dupTime(this),t._update(),i=dupTime(n),i._update(),r=new _Time(t._minus,t._hour+i._hour,t._min+i._min,t._sec+i._sec,t._frame+i._frame),r.reduce(),r):this._minus!=n<0?this.sub(-n):(t=dupTime(this),t._update(),i=floatToTime(n),r=new _Time(t._minus,t._hour+i._hour,t._min+i._min,t._sec+i._sec,t._frame+i._frame),r.reduce(),r)},addAndAss:function(n){var t;return n instanceof _Time?this._minus!=n._minus?this.subAndAss(n.minus()):(this._update(),t=dupTime(n),t._update(),this._hour+=t._hour,this._min+=t._min,this._sec+=t._sec,this._frame+=t._frame,this.reduce()):this._minus!=n<0?this.subAndAss(-n):(this._update(),t=floatToTime(n),this._hour+=t._hour,this._min+=t._min,this._sec+=t._sec,this._frame+=t._frame,this.reduce()),this},sub:function(n){var t,i,r;return n instanceof _Time?this._minus!=n._minus?this.add(n.minus()):(t=dupTime(this),t._update(),i=dupTime(n),i._update(),r=new _Time(t._minus,t._hour-i._hour,t._min-i._min,t._sec-i._sec,t._frame-i._frame),r.reduce(),r):this._minus!=n<0?this.add(-n):(t=dupTime(this),t._update(),i=floatToTime(n),r=new _Time(t._minus,t._hour-i._hour,t._min-i._min,t._sec-i._sec,t._frame-i._frame),r.reduce(),r)},subAndAss:function(n){var t;return n instanceof _Time?this._minus!=n._minus?this.addAndAss(n.minus()):(this._update(),t=dupTime(n),t._update(),this._hour-=t._hour,this._min-=t._min,this._sec-=t._sec,this._frame-=t._frame,this.reduce()):this._minus!=n<0?this.addAndAss(-n):(this._update(),t=floatToTime(n),this._hour-=t._hour,this._min-=t._min,this._sec-=t._sec,this._frame-=t._frame,this.reduce()),this},mul:function(n){var r,t,i;return n instanceof _Time?(t=dupTime(this),t._update(),r=n.toFloat(),i=new _Time(t._minus,t._hour*r,t._min*r,t._sec*r,t._frame*r),i.reduce(),i):(t=dupTime(this),t._update(),i=new _Time(t._minus,t._hour*n,t._min*n,t._sec*n,t._frame*n),i.reduce(),i)},mulAndAss:function(n){if(this._update(),n instanceof _Time){var t=n.toFloat();this._hour*=t;this._min*=t;this._sec*=t;this._frame*=t}else this._hour*=n,this._min*=n,this._sec*=n,this._frame*=n;return this.reduce(),this},div:function(n){var r,t,i;return n instanceof _Time?(t=dupTime(this),t._update(),r=n.toFloat(),i=new _Time(t._minus,t._hour/r,t._min/r,t._sec/r,t._frame/r),i.reduce(),i):(t=dupTime(this),t._update(),i=new _Time(t._minus,t._hour/n,t._min/n,t._sec/n,t._frame/n),i.reduce(),i)},divAndAss:function(n){if(this._update(),n instanceof _Time){var t=n.toFloat();this._hour/=t;this._min/=t;this._sec/=t;this._frame/=t}else this._hour/=n,this._min/=n,this._sec/=n,this._frame/=n;return this.reduce(),this},mod:function(n){return n instanceof _Time?floatToTime(this.toFloat()%n.toFloat()):floatToTime(this.toFloat()%n)},modAndAss:function(n){return n instanceof _Time?this._set(this.toFloat()%n.toFloat()):this._set(this.toFloat()%n),this},equal:function(n){return n instanceof _Time?this.toFloat()==n.toFloat():this.toFloat()==n},notEqual:function(n){return n instanceof _Time?this.toFloat()!=n.toFloat():this.toFloat()!=n}};_value_type=0;_Value.prototype={type:function(){if(_value_type!=this._type){switch(_value_type){case 0:switch(this._type){case 1:this._c.ass(this._f.toFloat());break;case 2:this._c.ass(this._t.toFloat())}break;case 1:switch(this._type){case 0:this._f.ass(this._c.toFloat());break;case 2:this._f.ass(this._t.toFloat())}break;case 2:switch(this._type){case 0:this._t.ass(this._c.toFloat());break;case 1:this._t.ass(this._f.toFloat())}}this._type=_value_type}return this._type},angToAng:function(n,t){this._complex().angToAng(n,t)},_complex:function(){switch(this._type){case 1:this._c.ass(this._f.toFloat());this._type=0;break;case 2:this._c.ass(this._t.toFloat());this._type=0}return this._c},_tmpComplex:function(){return this._type==1?floatToComplex(this._f.toFloat()):this._type==2?floatToComplex(this._t.toFloat()):this._c},_fract:function(){switch(this._type){case 0:this._f.ass(this._c.toFloat());this._type=1;break;case 2:this._f.ass(this._t.toFloat());this._type=1}return this._f},_tmpFract:function(){return this._type==0?floatToFract(this._c.toFloat()):this._type==2?floatToFract(this._t.toFloat()):this._f},_time:function(){switch(this._type){case 0:this._t.ass(this._c.toFloat());this._type=2;break;case 1:this._t.ass(this._f.toFloat());this._type=2}return this._t},_tmpTime:function(){return this._type==0?floatToTime(this._c.toFloat()):this._type==1?floatToTime(this._f.toFloat()):this._t},setFloat:function(n){switch(this._type){case 0:this._c.ass(n);break;case 1:this._f.ass(n);break;case 2:this._t.ass(n)}return this},setComplex:function(n){switch(this._type){case 0:this._c.ass(n);break;case 1:this._f.ass(n.toFloat());break;case 2:this._t.ass(n.toFloat())}return this},setFract:function(n){switch(this._type){case 0:this._c.ass(n.toFloat());break;case 1:this._f.ass(n);break;case 2:this._t.ass(n.toFloat())}return this},setTime:function(n){switch(this._type){case 0:this._c.ass(n.toFloat());break;case 1:this._f.ass(n.toFloat());break;case 2:this._t.ass(n)}return this},setReal:function(n){this._complex().setReal(n)},setImag:function(n){this._complex().setImag(n)},polar:function(n,t){this._complex().polar(n,t)},fractSetMinus:function(n){this._fract().setMinus(n)},setNum:function(n){this._fract().setNum(n)},setDenom:function(n){this._fract().setDenom(n)},fractReduce:function(){this._fract().reduce()},timeSetMinus:function(n){this._time().setMinus(n)},setHour:function(n){this._time().setHour(n)},setMin:function(n){this._time().setMin(n)},setSec:function(n){this._time().setSec(n)},setFrame:function(n){this._time().setFrame(n)},timeReduce:function(){this._time().reduce()},real:function(){return this._tmpComplex().real()},imag:function(){return this._tmpComplex().imag()},fractMinus:function(){return this._tmpFract().getMinus()},num:function(){return this._tmpFract().num()},denom:function(){return this._tmpFract().denom()},timeMinus:function(){return this._tmpTime().getMinus()},hour:function(){return this._tmpTime().hour()},min:function(){return this._tmpTime().min()},sec:function(){return this._tmpTime().sec()},frame:function(){return this._tmpTime().frame()},toFloat:function(){return this._type==0?this._c.toFloat():this._type==1?this._f.toFloat():this._t.toFloat()},ass:function(n){if(this._type=_value_type,n instanceof _Value)switch(n._type){case 0:switch(this._type){case 0:this._c.ass(n._c);break;case 1:this._f.ass(n._c.toFloat());break;case 2:this._t.ass(n._c.toFloat())}break;case 1:switch(this._type){case 0:this._c.ass(n._f.toFloat());break;case 1:this._f.ass(n._f);break;case 2:this._t.ass(n._f.toFloat())}break;case 2:switch(this._type){case 0:this._c.ass(n._t.toFloat());break;case 1:this._f.ass(n._t.toFloat());break;case 2:this._t.ass(n._t)}}else switch(this._type){case 0:this._c.ass(n);break;case 1:this._f.ass(n);break;case 2:this._t.ass(n)}return this},minus:function(){return(this.type(),this._type==0)?complexToValue(this._c.minus()):this._type==1?fractToValue(this._f.minus()):timeToValue(this._t.minus())},add:function(n){return(this.type(),n instanceof _Value)?n._type==0?this._type==0?complexToValue(this._c.add(n._c)):this._type==1?fractToValue(this._f.add(n._c.toFloat())):timeToValue(this._t.add(n._c.toFloat())):n._type==1?this._type==0?complexToValue(this._c.add(n._f.toFloat())):this._type==1?fractToValue(this._f.add(n._f)):timeToValue(this._t.add(n._f.toFloat())):this._type==0?complexToValue(this._c.add(n._t.toFloat())):this._type==1?fractToValue(this._f.add(n._t.toFloat())):timeToValue(this._t.add(n._t)):this._type==0?complexToValue(this._c.add(n)):this._type==1?fractToValue(this._f.add(n)):timeToValue(this._t.add(n))},addAndAss:function(n){if(n instanceof _Value)switch(n._type){case 0:switch(this.type()){case 0:this._c.addAndAss(n._c);break;case 1:this._f.addAndAss(n._c.toFloat());break;case 2:this._t.addAndAss(n._c.toFloat())}break;case 1:switch(this.type()){case 0:this._c.addAndAss(n._f.toFloat());break;case 1:this._f.addAndAss(n._f);break;case 2:this._t.addAndAss(n._f.toFloat())}break;case 2:switch(this.type()){case 0:this._c.addAndAss(n._t.toFloat());break;case 1:this._f.addAndAss(n._t.toFloat());break;case 2:this._t.addAndAss(n._t)}}else switch(this.type()){case 0:this._c.addAndAss(n);break;case 1:this._f.addAndAss(n);break;case 2:this._t.addAndAss(n)}return this},sub:function(n){return(this.type(),n instanceof _Value)?n._type==0?this._type==0?complexToValue(this._c.sub(n._c)):this._type==1?fractToValue(this._f.sub(n._c.toFloat())):timeToValue(this._t.sub(n._c.toFloat())):n._type==1?this._type==0?complexToValue(this._c.sub(n._f.toFloat())):this._type==1?fractToValue(this._f.sub(n._f)):timeToValue(this._t.sub(n._f.toFloat())):this._type==0?complexToValue(this._c.sub(n._t.toFloat())):this._type==1?fractToValue(this._f.sub(n._t.toFloat())):timeToValue(this._t.sub(n._t)):this._type==0?complexToValue(this._c.sub(n)):this._type==1?fractToValue(this._f.sub(n)):timeToValue(this._t.sub(n))},subAndAss:function(n){if(n instanceof _Value)switch(n._type){case 0:switch(this.type()){case 0:this._c.subAndAss(n._c);break;case 1:this._f.subAndAss(n._c.toFloat());break;case 2:this._t.subAndAss(n._c.toFloat())}break;case 1:switch(this.type()){case 0:this._c.subAndAss(n._f.toFloat());break;case 1:this._f.subAndAss(n._f);break;case 2:this._t.subAndAss(n._f.toFloat())}break;case 2:switch(this.type()){case 0:this._c.subAndAss(n._t.toFloat());break;case 1:this._f.subAndAss(n._t.toFloat());break;case 2:this._t.subAndAss(n._t)}}else switch(this.type()){case 0:this._c.subAndAss(n);break;case 1:this._f.subAndAss(n);break;case 2:this._t.subAndAss(n)}return this},mul:function(n){return(this.type(),n instanceof _Value)?n._type==0?this._type==0?complexToValue(this._c.mul(n._c)):this._type==1?fractToValue(this._f.mul(n._c.toFloat())):timeToValue(this._t.mul(n._c.toFloat())):n._type==1?this._type==0?complexToValue(this._c.mul(n._f.toFloat())):this._type==1?fractToValue(this._f.mul(n._f)):timeToValue(this._t.mul(n._f.toFloat())):this._type==0?complexToValue(this._c.mul(n._t.toFloat())):this._type==1?fractToValue(this._f.mul(n._t.toFloat())):timeToValue(this._t.mul(n._t)):this._type==0?complexToValue(this._c.mul(n)):this._type==1?fractToValue(this._f.mul(n)):timeToValue(this._t.mul(n))},mulAndAss:function(n){if(n instanceof _Value)switch(n._type){case 0:switch(this.type()){case 0:this._c.mulAndAss(n._c);break;case 1:this._f.mulAndAss(n._c.toFloat());break;case 2:this._t.mulAndAss(n._c.toFloat())}break;case 1:switch(this.type()){case 0:this._c.mulAndAss(n._f.toFloat());break;case 1:this._f.mulAndAss(n._f);break;case 2:this._t.mulAndAss(n._f.toFloat())}break;case 2:switch(this.type()){case 0:this._c.mulAndAss(n._t.toFloat());break;case 1:this._f.mulAndAss(n._t.toFloat());break;case 2:this._t.mulAndAss(n._t)}}else switch(this.type()){case 0:this._c.mulAndAss(n);break;case 1:this._f.mulAndAss(n);break;case 2:this._t.mulAndAss(n)}return this},div:function(n){return(this.type(),n instanceof _Value)?n._type==0?this._type==0?complexToValue(this._c.div(n._c)):this._type==1?fractToValue(this._f.div(n._c.toFloat())):timeToValue(this._t.div(n._c.toFloat())):n._type==1?this._type==0?complexToValue(this._c.div(n._f.toFloat())):this._type==1?fractToValue(this._f.div(n._f)):timeToValue(this._t.div(n._f.toFloat())):this._type==0?complexToValue(this._c.div(n._t.toFloat())):this._type==1?fractToValue(this._f.div(n._t.toFloat())):timeToValue(this._t.div(n._t)):this._type==0?complexToValue(this._c.div(n)):this._type==1?fractToValue(this._f.div(n)):timeToValue(this._t.div(n))},divAndAss:function(n){if(n instanceof _Value)switch(n._type){case 0:switch(this.type()){case 0:this._c.divAndAss(n._c);break;case 1:this._f.divAndAss(n._c.toFloat());break;case 2:this._t.divAndAss(n._c.toFloat())}break;case 1:switch(this.type()){case 0:this._c.divAndAss(n._f.toFloat());break;case 1:this._f.divAndAss(n._f);break;case 2:this._t.divAndAss(n._f.toFloat())}break;case 2:switch(this.type()){case 0:this._c.divAndAss(n._t.toFloat());break;case 1:this._f.divAndAss(n._t.toFloat());break;case 2:this._t.divAndAss(n._t)}}else switch(this.type()){case 0:this._c.divAndAss(n);break;case 1:this._f.divAndAss(n);break;case 2:this._t.divAndAss(n)}return this},mod:function(n){return(this.type(),n instanceof _Value)?n._type==0?this._type==0?complexToValue(this._c.mod(n._c)):this._type==1?fractToValue(this._f.mod(n._c.toFloat())):timeToValue(this._t.mod(n._c.toFloat())):n._type==1?this._type==0?complexToValue(this._c.mod(n._f.toFloat())):this._type==1?fractToValue(this._f.mod(n._f)):timeToValue(this._t.mod(n._f.toFloat())):this._type==0?complexToValue(this._c.mod(n._t.toFloat())):this._type==1?fractToValue(this._f.mod(n._t.toFloat())):timeToValue(this._t.mod(n._t)):this._type==0?complexToValue(this._c.mod(n)):this._type==1?fractToValue(this._f.mod(n)):timeToValue(this._t.mod(n))},modAndAss:function(n){if(n instanceof _Value)switch(n._type){case 0:switch(this.type()){case 0:this._c.modAndAss(n._c);break;case 1:this._f.modAndAss(n._c.toFloat());break;case 2:this._t.modAndAss(n._c.toFloat())}break;case 1:switch(this.type()){case 0:this._c.modAndAss(n._f.toFloat());break;case 1:this._f.modAndAss(n._f);break;case 2:this._t.modAndAss(n._f.toFloat())}break;case 2:switch(this.type()){case 0:this._c.modAndAss(n._t.toFloat());break;case 1:this._f.modAndAss(n._t.toFloat());break;case 2:this._t.modAndAss(n._t)}}else switch(this.type()){case 0:this._c.modAndAss(n);break;case 1:this._f.modAndAss(n);break;case 2:this._t.modAndAss(n)}return this},equal:function(n){return(this.type(),n instanceof _Value)?n._type==0?this._type==0?this._c.equal(n._c):this._type==1?this._f.equal(n._c.toFloat()):this._t.equal(n._c.toFloat()):n._type==1?this._type==0?this._c.equal(n._f.toFloat()):this._type==1?this._f.equal(n._f):this._t.equal(n._f.toFloat()):this._type==0?this._c.equal(n._t.toFloat()):this._type==1?this._f.equal(n._t.toFloat()):this._t.equal(n._t):this._type==0?this._c.equal(n):this._type==1?this._f.equal(n):this._t.equal(n)},notEqual:function(n){return(this.type(),n instanceof _Value)?n._type==0?this._type==0?this._c.notEqual(n._c):this._type==1?this._f.notEqual(n._c.toFloat()):this._t.notEqual(n._c.toFloat()):n._type==1?this._type==0?this._c.notEqual(n._f.toFloat()):this._type==1?this._f.notEqual(n._f):this._t.notEqual(n._f.toFloat()):this._type==0?this._c.notEqual(n._t.toFloat()):this._type==1?this._f.notEqual(n._t.toFloat()):this._t.notEqual(n._t):this._type==0?this._c.notEqual(n):this._type==1?this._f.notEqual(n):this._t.notEqual(n)},abs:function(){return(this.type(),this._type==0)?floatToValue(this._c.fabs()):this._type==1?fractToValue(this._f.abs()):fractToValue(this._tmpFract().abs())},pow:function(n){return(this.type(),n instanceof _Value)?this._type==0?complexToValue(this._c.pow(n._tmpComplex())):this._type==1?fractToValue(this._f.pow(n._tmpFract())):fractToValue(this._tmpFract().pow(n._tmpFract())):this._type==0?complexToValue(this._c.pow(n)):this._type==1?fractToValue(this._f.pow(n)):fractToValue(this._tmpFract().pow(n))},sqr:function(){return(this.type(),this._type==0)?complexToValue(this._c.sqr()):this._type==1?fractToValue(this._f.sqr()):fractToValue(this._tmpFract().sqr())},ldexp:function(n){var i=this.toFloat(),t=n>=0?2:.5;for(n<0&&(n=-n);n!=0;)(n&1)!=0&&(i*=t),t*=t,n=_DIV(n,2);return floatToValue(i)},frexp:function(n){var t=this.toFloat(),r=t<0?!0:!1,i;if(r&&(t=-t),i=0,t>=1)while(t>=1)t/=2,i++;else if(t!=0)while(t<.5)t*=2,i--;return n.set(i),r&&(t=-t),floatToValue(t)},modf:function(n){var t=this.toFloat(),i=_INT(t);return n.set(i),floatToValue(t-i)},farg:function(){return this._complex().farg()},fnorm:function(){return this._complex().fnorm()},conjg:function(){return complexToValue(this._complex().conjg())},sin:function(){return complexToValue(this._complex().sin())},cos:function(){return complexToValue(this._complex().cos())},tan:function(){return complexToValue(this._complex().tan())},asin:function(){return complexToValue(this._complex().asin())},acos:function(){return complexToValue(this._complex().acos())},atan:function(){return complexToValue(this._complex().atan())},sinh:function(){return complexToValue(this._complex().sinh())},cosh:function(){return complexToValue(this._complex().cosh())},tanh:function(){return complexToValue(this._complex().tanh())},asinh:function(){return complexToValue(this._complex().asinh())},acosh:function(){return complexToValue(this._complex().acosh())},atanh:function(){return complexToValue(this._complex().atanh())},ceil:function(){return complexToValue(this._complex().ceil())},floor:function(){return complexToValue(this._complex().floor())},exp:function(){return complexToValue(this._complex().exp())},exp10:function(){return complexToValue(this._complex().exp10())},log:function(){return complexToValue(this._complex().log())},log10:function(){return complexToValue(this._complex().log10())},sqrt:function(){return complexToValue(this._complex().sqrt())}};_console_break="<br>";_Console.prototype={setMaxBlankLine:function(n){this._blankLine="";for(var t=0;t<=n;t++)this._blankLine+=_console_break},setMaxLen:function(n){this._maxLen=n},setColor:function(n){this._color=n==undefined?"":n},setBold:function(n){this._bold=n},setItalic:function(n){this._italic=n},lock:function(){this._lock=!0;this._needUpdate=!1},unlock:function(){this._lock=!1;this._needUpdate&&(this._update(),this._needUpdate=!1)},_update:function(){if(this._lock){this._needUpdate=!0;return}if(this._maxLen>0)while(this._html.length>this._maxLen){var n=this._html.indexOf(_console_break);if(n<0)break;this._html=this._html.slice(n+_console_break.length)}this._div.innerHTML=this._html;this._html.length>0&&onConsoleUpdate(this._id)},_add:function(n){n.length>0&&(this._bold&&(this._html.slice(-4)=="<\/b>"?this._html=this._html.substring(0,this._html.length-4):this._html+="<b>"),this._italic&&(this._html.slice(-4)=="<\/i>"?this._html=this._html.substring(0,this._html.length-4):this._html+="<i>"),this._color.length>0&&(this._html.slice(-7)=="<\/span>"&&this._color==this._lastColor?this._html=this._html.substring(0,this._html.length-7):this._html+="<span style='color:#"+this._color+"'>",this._lastColor=this._color),this._html+=n,this._color.length>0&&(this._html+="<\/span>"),this._italic&&(this._html+="<\/i>"),this._bold&&(this._html+="<\/b>"))},clear:function(){this._html="";this._update()},newLine:function(){this._html.length>=_console_break.length&&this._html.slice(-_console_break.length)!=_console_break&&(this._html+=_console_break,this._update())},print:function(n){n!=undefined&&(this._add(n),this._update())},println:function(n){var t=!1;n!=undefined&&(this._add(n),t=!0);this._blankLine.length>0&&this._html.length>=this._blankLine.length?this._html.slice(-this._blankLine.length)!=this._blankLine&&(this._html+=_console_break,t=!0):(this._html+=_console_break,t=!0);t&&this._update()},scrollBottom:function(){this._div.scrollTop=this._div.scrollHeight}};_Error.prototype={message:function(){return this._message},name:function(){return this._name},description:function(){return this._description},number:function(){return this._number},file:function(){return this._file},line:function(){return this._line},column:function(){return this._column},stack:function(){return this._stack}}